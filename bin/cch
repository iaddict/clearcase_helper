#!C:/Ruby192/bin/ruby.exe

require 'rubygems'
require 'thor'

require File.dirname(__FILE__)+'/../lib/clearcase_helper'

class ClearcaseHelperCommand < Thor
  desc "all_files [PATH]", "Shows all files in this view prefixed with its short status (CO: checkedout, HI: hijacked, ?: only in view)."
  def all_files(path='./')
    view = ClearcaseHelper::View.new(path)
    puts view.all_files_with_status
  end
  map ['status', 'st'] => :all_files

  desc "view_only_files [PATH]", "Shows all files that are not added to this view (unversioned files)."
  def view_only_files(path='./')
    view = ClearcaseHelper::View.new(path)
    puts view.view_only_files
  end
  map 'vof' => :view_only_files

  desc "hijacked_files [PATH]", "Shows all files that are hijacked."
  def hijacked_files(path='./')
    view = ClearcaseHelper::View.new(path)
    puts view.hijacked_files
  end
  map 'hif' => :hijacked_files

  desc "checkedout_files [PATH]", "Shows all files that are checked out."
  def checkedout_files(path='./')
    view = ClearcaseHelper::View.new(path)
    puts view.checkedout_files
  end
  map 'cof' => :checkedout_files

  desc "checkout_highjacked [PATH]", "Checks out all highjacked files."
  def checkout_highjacked(path='./')
    view = ClearcaseHelper::View.new(path)
    puts view.checkout_highjacked!
  end
  map 'cohi' => :checkout_highjacked

  desc "checkin [PATH]", "Checks in all checked out files."
  def checkin_checkedout(path='./')
    view = ClearcaseHelper::View.new(path)
    puts view.checkin_checkedout!
  end
  map 'ci' => :checkin_checkedout

  desc "checkin_hijacked [PATH]", "Checks hijacked files out and in again."
  def checkin_hijacked(path='./')
    view = ClearcaseHelper::View.new(path)
    puts view.checkin_hijacked!
  end
  map 'cihi' => :checkin_hijacked

  desc "add_view_only_files [PATH]", "Adds and checks in files that are not yet versioned."
  def add_view_only_files(path='./')
    view = ClearcaseHelper::View.new(path)
    puts view.add_view_only_files!
  end
  map ['avo', 'add'] => :add_view_only_files
end

ClearcaseHelperCommand.start